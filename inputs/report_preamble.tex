% Set up FONTS to use.
\usepackage[bitstream-charter]{mathdesign}
\usepackage{fontspec}
\DeclareSymbolFont{usualmathcal}{OMS}{cmsy}{m}{n}
\DeclareSymbolFontAlphabet{\mathcal}{usualmathcal}
\setmainfont[Scale=0.9]{Charis SIL}
\defaultfontfeatures[Charis SIL]{Script=latn, Ligatures=TeX}

% To indicate current chapter name and number in the header.
\usepackage{fancyhdr}
\pagestyle{fancy}
\renewcommand{\chaptermark}[1]{\markboth{#1}{#1}}
\fancyhead[R]{}
\fancyhead[L]{\chaptername\ \thechapter\ --\ \leftmark \hfill \thepage}

% For fancy chapter header.
\usepackage{titlesec, blindtext, color}
\definecolor{gray75}{gray}{0.75}
\newcommand{\hsp}{\hspace{20pt}}
\titleformat{\chapter}[hang]{\Huge\bfseries}{\thechapter\hsp\textcolor{gray75}{|}\hsp}{0pt}{\Huge\bfseries}

% -------------------------------------------------------
% -------------------------------------------------------
% ------------------- CUSTOM STUFF ----------------------
% -------------------------------------------------------
% -------------------------------------------------------

%
% Packages.
%
\usepackage[font=small,
            labelfont=bf]{caption} % Proper formatting for caption text.

% Basically increase text width.
\usepackage[top=2.5cm, bottom=2.5cm, left=3.5cm, right=3.5cm]{geometry}

% For graphics inclusion.
\usepackage{graphicx}

% For making urls clickable.
\usepackage{xurl}

%
% (Re)new commands. (Except those that are part of a specific setup).
%
\newcommand{\emd}{\textemdash}
\newcommand{\fn}[1]{\footnote{#1}}

% For ยง symbol. Some TeX compilers might complain if it is entered literally,
% so use this command instead.
\newcommand{\ts}{\textsection}

%
% All other custom stuff.
%

% -------------------------------------------------------
% -------------------------------------------------------
% ------------------- END CUSTOM STUFF ------------------
% -------------------------------------------------------
% -------------------------------------------------------

% Language and bibliography. Language with polyglossia must be set before
% biblatex is used, or error ensues. But it's probably good advice with babel
% and bibtex also.
% For Portuguese, replace "UKenglish" with "portuges".
\usepackage[UKenglish]{babel}
\usepackage[comma, numbers]{natbib}
\renewcommand{\bibsection}{\chapter*{References}}  % name the bib chapter References.
\usepackage{url}
% Make bib listing with bold <number><dot>.
\makeatletter
\renewcommand\@biblabel[1]{\textbf{#1.}}
\makeatother
% \renewcommand{\UrlFont}{\small\tt}

% hyperref et al.
% ***NOTA BENE:*** The hyperref package if used, MUST BE THE LAST ONE included!
%
\usepackage{xcolor} % For MidnightBlue colour!
\providecolors{MidnightBlue}
\usepackage[bookmarks=true,
            citecolor=MidnightBlue,
            colorlinks=true,
            hyperfootnotes=false,
            linkcolor=MidnightBlue,
            linktocpage=true,
            pagebackref=true,
            urlcolor=MidnightBlue]{hyperref}
\renewcommand*{\backref}[1]{}
\renewcommand*{\backrefalt}[4]{%
  \ifcase #1 Not cited.%
    \or Cited on page~#2.%
    \else Cited on pages~#2.%
  \fi}
